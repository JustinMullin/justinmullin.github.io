<!--suppress JSXNamespaceValidation -->
<html>
	<body>
		<div id="root"></div>
		<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
		<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
		<script crossorigin src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
		<script type="text/babel">

			const rootElement = document.getElementById('root');

      function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

			class Container extends React.Component {
			  constructor(props) {
			    super(props);
			    this.updateInfo();
			    this.state = {question: "", answers: ["a", "b", "c", "d"]}
        }

			  updateInfo = async () => {
          const response = await fetch('https://opentdb.com/api.php?amount=1&category=9&difficulty=medium&type=multiple');
          const json = await response.json();
          const data = json.results[0];
          const answers = [data.correct_answer].concat(data.incorrect_answers);
          shuffle(answers);
          this.setState({question: data.question, answers: answers})
        };

        render() {
          return (
              <div>
                <h1 dangerouslySetInnerHTML={{__html: this.state.question}}/>
                <ul>
									{this.state.answers.map(answer => <li dangerouslySetInnerHTML={{__html: answer}}/>)}
								</ul>
								<button onClick={this.updateInfo}>New Question</button>
              </div>
          );
        }

      }

			class Entry extends React.Component {
			  constructor(props) {
			    super(props);
        }

        handleChange = (event) => {
          this.props.onChange(event.target.value);
        };

			  render() {
          return <label><input value={this.props.value} onChange={this.handleChange}/></label>
        }
			}

			const app = (
          <Container/>
      );

			ReactDOM.render(app, rootElement)

		</script>
	</body>
</html>
